20-08-25: Khởi tạo dự án, cấu trúc thư mục:
          material_data: chứa thông tin vật liệu
          motor_geometry: chứa động cơ, mạng từ trở, phần tử, các hàm hỗ trợ vẽ geometry,..
          solver: Bộ tạo hệ phương trình, giải hệ phương trình

21-08-25: Khởi tạo lớp đối tượng cho động cơ SPM
          Khởi tạo lớp đối tượng chứa thông tin vật liệu

22-08-25: Khởi tạo lớp đối tượng Segment
          Xây dựng bộ công cụ vẽ hình học Segment

23-08-25: Biểu diễn động cơ bằng tập hợp các segment
          Cập nhật bộ công cụ vẽ Segment

26-08-25: Cập nhật bộ công cụ vẽ Segment
          Hoàn thành list segments chứa mọi thông tin về SPM

29-08-25: Khởi tạo đối tượng Element: kế thừa thông tin Segment, tính toán MMF, Reluctance 

06-09-25: Cập nhật Element: tính toán từ trở
          Tạo đối tượng VirtualArray (Một mảng 1D sử dụng như mảng 2D, dùng cho mảng từ thông vòng)
          fix bug ReluctanceNetwork
          Tạo đối tượng ReluctanceNetwork
          Chỉnh sửa hàm khởi tạo segments, xóa bỏ tham số đầu vào stator_excitation
          !!! Class Element chưa hoàn chỉnh, đang bị bug!!!

07-09-25: Sửa lỗi extract_motor_geometry: Sai axial length của tooth, sai delta_angle_magnetic_source 
          Cập nhật thêm hành vi ReluctanceNetwork.display (giúp debug dễ hơn)
          Sửa hàm extract_element_info: fix bug cho element không khí
          Thêm tính năng tự động chuyển theme sáng - tối theo thời gian

08-09-25: Cập nhật Class MaterialDataBase: không cần truyền đối số khi khởi tạo vật liệu
          Tối giản Element: loại bỏ các thuộc tính trung gian, không cần thiết 
          (Element cần đổi thành @property (Cần cập nhật các element khi thay dòng kích thích) )
          Cập nhật VirtualArray: thêm tính năng truy cập tuần hoàn CHỈ THEO CỘT:
          Giả sử có một mảng 1D, kích cỡ ảo là 3 x 4, nếu truy cập vào phần tử
          hàng 3, cột 6, thì chỉ số cột sẽ quay vòng lại -> Tính tuần hoàn theo cột,
          Nếu truy cập hàng 4, cột 2, hoặc hàng -1, cột 2 thì trả về 0 

          Element vẫn chưa build xong

09-09-25: Sửa extract_motor_geometry: Lỗi tính sai sức từ động nam châm: F_m = H_0 * length
          Chuyển method display từ ReluctanceNetwork vào Element
          Cập nhật đầy đủ thuộc tính cho Element (gần như hoàn thiện)

10-09-25: Hoàn thiện Element và ReluctanceNetwork: tự động tính lại các thuộc tính phụ thuộc
          Khi thay đổi stator_excitation hoặc loop_flux_array
          Cập nhật ReluctanceNetwork: bổ sung getter: truy cập đến Element(i,j), có tính chất 
          tuần hoàn theo cột, nếu truy cập vượt hàng, trả về một DummyElement
          Đã hoàn thành việc xây dụng ReluctanceNetwork
          Tạo hàm tìm độ từ thẩm lớn nhất, cài độ từ thẩm sắt cực tiểu -> Khởi đầu Newton-Rapshon
          Đang tạo hàm xây dựng ma trận, Jacobian, F

11-09-25: Cập nhật maxtrix_product: Nếu output là mảng 1x1 thì ép kiểu về số thực float
          Gặp lỗi khi sử dụng scipy: các hàm trong thư viện này yêu cầu số thực kiểu float
          (Cần cập nhật Element sao cho các thuộc tính trả về float, thay vì list, tuple)
          Xóa phần tạo Jacobian trong create_equation
          Thêm vào thuộc tính average_flux_density trong Element 
          Bổ sung thuộc tính average_flux_density trong Element
          Bổ sung hành vi view_flux_density trong ReluctanceNetwork

12-09-25: Kết quả chưa phù hợp, cần viết lại create_equation và các ánh xạ hàng, cột.
          Tối ưu thuật toán để không cần dùng DummyElement 
          Tối ưu hành vi display của Element: Chỉ hiển thị các thuộc tính quan trọng
          Đồng bộ quy ước vị trí: hàng i, cột j phải là tuple (i,j) thay vì list [i,j]

14-09-25: Xây dụng dạng lưới pixel thay cho lưới polar:
          Lưới pixel có thể bền vững hơn về mặt toán học, công thức đơn giản hơn. 
          Xây dựng đối tượng Grid: đối tượng lưới có thể tùy chọn loại lưới polar hoặc pixel

15-09-25: Rebuild ReluctanceNetwork : Tương thích với lưới pixel
          (Yêu cầu phải build lại Element):

          Cập nhật các hàm tính toán kích thước theo lưới: extract_element_info, compute_element_grid_dimension
          Cập nhật Segment: Đổi tên thuộc tính kích thước cho tổng quát với 2 loại lưới

          Cập nhật Element: Sửa tên thuộc tính cho tổng quát với 2 loại lưới, tính toán lại từ trở chân không
          Cập nhật ReluctanceNetwork cho tương thích với lưới mới 
          Tạo hàm create_cartesian_grid: dùng để tạo lưới cartesian
          Vẫn còn lỗi trong Element: chưa thống nhất tên biến 
          Fix bug trong các hàm tính kích thước: lấy giá trị tuyệt đối cho lưới nằm ở vị trí âm trong đồ thị

16-09-25: Cập nhật Grid và các hàm liên quan: chuẩn hóa lại cho trực quan: first_dimension là X hoặc tangential, 
          second_dimension là Y hoặc radial
          Thêm vào ReluctanceNetwork.cyclic_type: Tính chất tuần hoàn của mạch từ: tuần hoàn theo first_dimension
          hoặc second_dimension hoặc cả 2 ( đóng kín )

          Đang lỗi về quy ước chiều, cần sửa ReluctanceNetwork, Segment, các hàm phụ trợ liên quan:
          Bổ sung thuộc tính cyclic_type vào ReluctanceNetwork
        
17-09-25: Cần tạo lại create_equation, fix lỗi hàng cột trong các hàm tính kích thước, sửa lại mmf trong element
          Xóa Class DummyElement, xử lý tuần hoàn ngay trong create_equation
          Cập nhật get_linear_index: toàn diện hơn, dùng trong ReluctanceNetwork, VirtualArray
          Đã tạo hệ số R,F thành công trong create_equation
          Giải thử bước đầu tiên: thành công, kết quả đúng mong muốn

18-09-25: Phát hiện lỗi từ trở sai chiều trong lưới "polar" : dọc thành ngang, khiến kết quả bị sai
          Đã sửa lỗi sai từ trở trong mạng từ trở
          Kết quả tính toán với lưới cực vẫn chưa phù hợp 

19-09-25: Dự định bổ sung loại lưới hình thang cân (trapezoid): ổn định số học hơn lưới cực, tốc độ tính toán nhanh hơn

20-09-25: Bổ sung thư mục chứa công thức: document
          Bổ sung vào create_equation: Lập ma trận Jacobian
          Bổ sung vào bộ giải: Phương pháp lặp đơn có giảm chấn
          Chuẩn hóa kiểu dữ liệu đầu ra của create_equation:
          R,J là ma trận dạng thưa
          P,F,G là ma trận cột 
          
21-09-25: Bổ sung thư mục figure: chứa ảnh, đồ thị quan trọng
          Bổ sung phương pháp Quasi Newton Broyden
          Bổ sung phương pháp jacobian_free_Newton_krylov (Hiện tại đang tốt nhất)
          Bổ sung phương pháp Newton_rapshon dùng R để xấp xỉ Jacobian
          Bổ sung thư mục chuyên vẽ geometry: motor_geometry/utils/draw_geometry

24-09-25: Bổ sung thành công lưới hình thang cân: "trapezoid": Bền vững và tính nhanh hơn lưới "polar"
          Kiểm chứng thành công lưới polar cho SPM
         
25-09-25: Bổ sung vào ReluctanceNetwork: method coenergy (Đồng năng lượng tại vị trí hiện tại )
          Bổ sung vào ReluctanceNetwork: method shift_element (dùng để quay rotor)
          Bổ sung thư mục scenarios: chứa các kịch bản thực hiện 

26-09-25: Tối ưu thuật toán lặp: damping_factor có thể thích ứng
          Sửa lỗi trong find_damping_factor khiến damping luôn nhỏ nhất
          
27-09-25: Hoàn thiện thuật toán lặp đơn với hệ số giảm chấn thích nghi
          fix bug trong view_flux_density khiến đồ thị bị lệch về 1 góc 

28-09-25: Cập nhật lưới: thêm 2 lớp không khí mỏng bên ngoài động cơ nhằm cải thiện độ chính xác
          Tính toán thành công cogging, đã kiểm chứng thành công dạng sóng và biên độ

29-09-25: Cập nhật thư mục data: có thể lưu lại dữ liệu sau khi tính toán
          So sánh thành công kết quả tính toán với Ansys MotorCAD
          Cập nhật Segment và display_segment: hỗ trợ interactive: debug và hiển thị tốt hơn 
          Tối ưu hiệu năng: tìm độ từ thẩm chỉ nội suy bậc 1, trả về đạo hàm rỗng (vì không dùng Jacobian nữa)

30-09-25: Tính toán thành công mật độ từ thông khe hở không khí, từ thông liên kết, sức phản điện động
          (Đã so sánh với FEM)

01-10-25: Hoàn thành tính toán, so sánh với fem, cho kết quả khớp về dạng sóng, biên độ có xu hướng nhỏ hơn 5%
          Bổ sung class CyclicData dùng để lưu dữ liệu tuần hoàn 
          Bổ sung hàm phụ trợ giúp vẽ các đối tượng CyclicData lên trên cùng một đồ thị, có căn chỉnh 
          Bổ sung thuộc tính cho động cơ: góc cơ khí cho 1 chu kì cogging
          Phát hiện MotorCAD vẽ 2 chu kì cogging liên tiếp -> chỉ cần vẽ 1 chu kì rồi copy 

02-10-25: Bổ sung find_solver_parameter: Cung cấp các tham số thích ứng cho bộ giải động cơ 

04-10-25: Cập nhật solver cho SPM: sử dụng các thông số đã cung cấp trong find_solver_parameter
          Bổ sung hàm điều chỉnh dữ liệu theo chu kì cho trước (cắt, xét, nội suy dữ liệu)
          Bổ sung hàm tạo gif chất lượng cao ( dùng để trình diễn )
          Big update: Tích hợp luôn solver thành một method của đối tượng động cơ 

07-10-25: Bổ sung vào system hàm find_locate: giúp tìm đường dẫn thư mục bất kì trong dự án
          Nghiên cứu bổ sung tính năng tự động hóa phần mềm ANSYS MotorCAD

08-10-25: Bổ sung class SPM (bản cập nhật của class SurfacePMMotor) tích hợp các công cụ giải thành một method
          Bổ sung method create_gif cho class SPM
          Cập nhật thanh tiến trình sử dụng thư viện tqdm

09-10-25: Tối ưu bộ giải động cơ: gộp những bước giải chung: thu kết quả flux_linkage, flux_density và cogging đồng thời

10-10-25: Hiển thị debug ít hơn trong class Reluctance Network

11-10-25: Tối ưu hàm find_solver_parameter: Giảm số bước tính toán, giảm độ mịn lưới, tăng tốc độ tính toán

12-10-25: Tối ưu đạo hàm : thay gradient mặc định bằng gradien trung tâm có mở rộng dữ liệu sang 2 phía    
          -> Đạo hàm dữ liệu có chu kì chuẩn hơn 
          Bổ sung hàm nhân đôi dữ liệu có chu kì, sử dụng cho cogging torque 
          -> Giảm chi phí tính toán gấp đôi cho cogging torque
          Sử dụng tích phân để tính chính xác coenergy -> Tăng độ chính xác momen (Phương thức trong Element)

13-10-25: Cogging đã khớp mô phỏng, tạo script so sánh hàng loạt thông số với FEM

18-10-25: Bổ sung vào Grid phương thức display -> Cho phép vẽ một lưới rỗng

20-10-25: Sửa mô hình: Ma trận dây quấn được cập nhật theo tỉ lệ Element và Segment
          Từ thông liên kết được tính bằng cách duyệt mọi phần tử trong toàn không gian
          -> Có thể giảm tốc độ tính toán, mặt khác làm mô hình bền vững hơn
          Cập nhật ReluctanceNetwork: Thêm vào method flux_linkage -> Tổng quát hóa hơn, ổn định hơn 

22-10-25: Cập nhật method view_flux_density trong ReluctanceNetwork: cho phép sao chép và lặp lại 
          miền tính toán để quan sát toàn bộ chu kì tròn,
          Bổ sung tùy chọn quality =["low","medium","high","extreme"] cho bộ giải -> tùy chọn chất lượng kết quả

23-10-25: Bổ sung thư mục ansys: tiếp cận API của hãng để tự động hóa quá trình mô phỏng và lấy dữ liệu

24-10-25: Thêm script tự động mô phỏng hàng loạt với tham số kích thước thay đổi, đánh giá sai số ( hệ số tương quan)
          của 2 phương pháp
          Cập nhật lực kháng từ nam châm N30EH theo thông tin từ catalog của hãng (trong thư mục document)
          Nâng cấp hàm tìm độ từ thẩm lookup_BH_curve cho phép tìm độ từ thẩm của hàng loạt giá trị 

25-10-25: Bổ sung hàm so sánh 2 dạng sóng bằng phương pháp NRMSE (Normalized Root Mean Squared Error)
          hay "Sai số bình phương trung bình gốc đã được chuẩn hóa

26-10-25: Tối ưu tham số lưới cho bộ tạo lưới đối với loại SPM
          Hoàn tiện script thực hiện bài kiểm tra benchmark thứ nhất (thay đổi airgap)
          (Quan trọng: chương trình sẽ được chạy trong virtual enviroment, giúp tăng tính ổn định, đóng gói)

29-10-25: Hoàn thiện bài benchmark thứ 2: chiều dài nam châm
          Bổ sung cách tính momen tổng quát hơn với phương pháp maxwell stress tensor
          Nâng cấp chương trình: từ nay, các output đều trả về Class, thay vì list (dễ quản lý, mở rộng hơn)
          Bổ sung vào bộ giải, thêm dữ liệu airgap flux density theo hướng radial và tangential

30-10-25: Bổ sung phương pháp maxwell stress tensor để tính momen nhanh hơn, độ chính xác đảm bảo
          Debug thuật toán tạo và giải hệ phương trình: đo tỉ số thời gian tạo hệ phương trình trong 1 step 

01-11-25: Nâng cấp hàm so sánh 2 dạng sóng: cho phép tùy chỉnh chỉ số hàng để so sánh.
02-11-25: Phát hiện ra chi phí tính toán nằm trong cập nhật từ trở của ReluctanceNetwork
          -> Sử dụng kĩ thuật vectorization để tái cấu trúc ReluctanceNetwork

04-11-25: Bổ sung thêm thuộc tính .optimization cho ReluctanceNetwork.
          Cho phép lựa chọn cách tối ưu hóa là standard (sử dụng OOP) hoặc vectorized (vector hóa numpy)
          
08-11-25: Bộ giải với tối ưu vectorized đã được tạo thành công, tốc độ tính toán tăng gấp 10 lần
          Tiếp tục bổ sung các method tính momen theo maxwell stress tensor, coenergy, 
          tính flux_linkage,....

21-11-25: Sử dụng thang màu giống với ANSYS Maxwell để dễ đối chiếu hơn
          